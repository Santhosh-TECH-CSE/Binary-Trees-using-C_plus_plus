class Solution {
public:
    int x_depth = -1; int y_depth = -1;
    TreeNode* x_parent = nullptr; TreeNode* y_parent = nullptr;

    void dfs(TreeNode* root, TreeNode* parent, int depth, int x, int y){
        if(!root) return;

        if(root->val == x){
            x_depth = depth;
            x_parent = parent;
        }
        if(root->val == y){
            y_depth = depth;
            y_parent = parent;
        }

        dfs(root->left,root,depth+1,x,y);
        dfs(root->right,root,depth+1,x,y);
    }


    bool isCousins(TreeNode* root, int x, int y) {
        dfs(root,nullptr,0,x,y);
        return (x_parent != y_parent && x_depth == y_depth);

    }
};
